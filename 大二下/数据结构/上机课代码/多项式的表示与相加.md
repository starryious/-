# 多项式的表示与相加

> 使用语言: C(C99)

以下是全部代码, 在 CLion 中编译运行成功.

```c
#include <stdio.h>
#include <malloc.h>
#define NULL ((void *)0)


typedef struct Polynode {
    int coef;
    int exp;
    struct Polynode* next;
} Polynode, *Polylist;

Polylist Polylist_PolyCreate() {
    Polynode* head, * rear, * s;
    int c, e;
    head = (Polynode*)malloc(sizeof(Polynode));
    rear = head;
    scanf("%d,%d", &c, &e);
    while (c != 0) {
        s = (Polynode*)malloc(sizeof(Polynode));
        s->coef = c;
        s->exp = e;
        rear->next = s;
        rear = s;
        scanf("%d,%d", &c, &e);
    }
    rear->next = NULL;
    return head->next;
}

Polylist PolyAdd(Polylist polya, Polylist polyb) {
    Polynode* p, * q, * tail, * temp, * head;
    int sum;
    head = (Polynode*)malloc(sizeof(Polynode));
    tail = head;
    p = polya;
    q = polyb;
    while (p != NULL && q != NULL) {
        if (p->exp < q->exp) {
            tail->next = p;
            tail = p;
            p = p->next;
        }
        else if (p->exp == q->exp) {
            sum = p->coef + q->coef;
            if (sum != 0) {
                p->coef = sum;
                tail->next = p;
                tail = p;
                p = p->next;
                temp = q;
                q = q->next;
                free(temp);
            }
            else {
                temp = p;
                p = p->next;
                free(temp);
                temp = q;
                q = q->next;
                free(temp);
            }
        }
        else {
            tail->next = q;
            tail = q;
            q = q->next;
        }
    }
    if (p != NULL) {
        tail->next = p;
    }
    else {
        tail->next = q;
    }
    return head->next;
}

void print_poly(Polylist poly) {
//    输出多项式函数, 若x的指数为0, 则直接输出系数部分, 若不为0, 则输出全部部分
    Polynode* p = poly;
    while (p != NULL) {
        if(p->exp==0)
        {
            printf("%d",p->coef);
            printf("+");
        }
        else {
            printf("%d*x^%d", p->coef, p->exp);
            if (p->next != NULL && p->next->coef > 0) {
                printf("+");
            }
        }
        p = p->next;
    }
    printf("\n");
}

int main() {
    Polylist poly1, poly2;

    printf("Enter the first polynomial (coef,exp): ");
    poly1 = Polylist_PolyCreate();

    printf("Enter the second polynomial (coef,exp): ");
    poly2= Polylist_PolyCreate();
    printf("The first polynomial is: ");
    print_poly(poly1);
    printf("The second polynomial is: ");
    print_poly(poly2);
    PolyAdd(poly1,poly2);
    printf("The sum of the two polynomials is: ");
    print_poly(poly1);
    return 0;
}
```

